---
name: cubrid_vsphere
director_uuid: 0bc8d3c2-e032-4c7e-a99c-e23eea7091fc 

release:
  name: cubrid_dev
  version: latest

compilation:
  workers: 4
  network: default
  cloud_properties:
    ram: 2048
    disk: 8096
    cpu: 2

# this section describes how updates are handled
update:
  canaries: 1
  canary_watch_time: 30000
  update_watch_time: 30000
  max_in_flight: 4
networks:
- name: default
  subnets:
  - cloud_properties:
      name: Internal
    dns:
    - 10.30.20.24
    - 8.8.8.8
    gateway: 10.30.20.23
    name: default_unused
    range: 10.30.0.0/16
    reserved:
    - 10.30.0.1 - 10.30.20.22
    - 10.30.20.24 - 10.30.40.255
    static:
    - 10.30.60.11 - 10.30.60.70

resource_pools:
  - name: cubrid_resource_pools
    network: default
    stemcell:
      name: bosh-vsphere-esxi-ubuntu-trusty-go_agent
      version: latest
    cloud_properties:
      cpu: 1
      disk: 8192
      ram: 4096

jobs:
  - name: cubrid
    template: cubrid
    instances: 1
    resource_pool: cubrid_resource_pools
    persistent_disk: 16384
    networks:
    - name: default
      static_ips:
      - 10.30.60.23
  - name: cubrid_broker
    template: cubrid_broker
    instances: 1
    resource_pool: cubrid_resource_pools
    persistent_disk: 16384
    networks:
    - name: default
      static_ips:
      - 10.30.60.22
  - name : cubrid_broker_registrar
    template : cubrid_broker_registrar
    instances: 1
    lifecycle: errand
    resource_pool: cubrid_resource_pools
    networks:
    - name: default
    properties:
      broker:
        host: 10.30.60.22
        name: CubridDB
        password: cloudfoundry
        username: admin
        protocol: http
        port: 8088
      cf:
        admin_password: admin
        admin_username: admin
        api_url: https://api.controller.open-paas.com
    release: cubrid_dev
  - name : cubrid_broker_deregistrar
    template : cubrid_broker_deregistrar
    instances: 1
    lifecycle: errand
    resource_pool: cubrid_resource_pools
    networks:
    - name: default
    properties:
      broker:
        host: 10.30.60.22
        name: CubridDB
        password: cloudfoundry
        username: admin
        protocol: http
        port: 8088
      cf:
        admin_password: admin
        admin_username: admin
        api_url: https://api.controller.open-paas.com
    release: cubrid_dev

meta:
  apps_domain: cf.open-paas.com
  environment: null
  external_domain: cf.open-paas.com
  nats:
    machines:
    - 10.30.40.11
    password: admin
    port: 4222
    user: nats
  syslog_aggregator: null


properties:
  cubrid:
    max_clients: 200
  cubrid_broker:
    cubrid_ip: 10.30.60.23
    cubrid_db_port: 30000
    cubrid_db_name: cubrid_broker
    cubrid_db_user: dba
    cubrid_db_passwd: openpaas
    cubrid_ssh_port: 22
    cubrid_ssh_user: root
    cubrid_ssh_passwd: c1oudc0w
